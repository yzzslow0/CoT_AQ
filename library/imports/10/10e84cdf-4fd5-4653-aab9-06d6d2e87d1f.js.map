{"version":3,"sources":["assets/Script/Game.js"],"names":["Black","Red","ListChess","Array","cc","Class","extends","Component","properties","chessPrefab","default","type","Prefab","ListChessNode","node","whiteSpriteFrame","SpriteFrame","blackSpriteFrame","touchChess","Node","visible","the_last_touchChess","isDestory","Boolean","pzChess","onLoad","i","self","isMove","y","x","Chess","name","tag","flag","positionX","positionY","newNode","instantiate","addChild","parseInt","random0To1","length","number","splice","setPosition","p","zIndex","push","getComponent","game","on","EventType","TOUCH_START","event","log","setChess","TOUCH_END","isDestoryfunction","TOUCH_MOVE","delta","touch","getDelta","update","dt","mNode","test_label","getComponentInChildren","Label","color","Color","string","getChessHZ","destoryChess","other","notdestoryChess","position","ChessPZ_function","X","Y","mFlag","opacity","old_name"],"mappings":"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","file":"unknown","sourcesContent":["var Black = [5, 5, 5, 5, 5, 6, 6, 8, 8, 10, 10, 12, 12, 14, 14, 15];\nvar Red = [5, 5, 5, 5, 5, 6, 6, 8, 8, 10, 10, 12, 12, 14, 14, 15];\n\n\n\nvar ListChess = new Array(32); \n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        chessPrefab: {//棋子的预制资源\n            default: null,\n            type: cc.Prefab\n        },\n        ListChessNode: {//棋子节点的集合，用一维数组表示二维位置\n            default: [],\n            type: [cc.node]\n        },\n\n        whiteSpriteFrame: {//棋的图片\n            default: null,\n            type: cc.SpriteFrame\n        },\n\n        blackSpriteFrame: {//wu棋的图片\n            default: null,\n            type: cc.SpriteFrame\n        },\n\n        touchChess: {//每一回合点击的棋子\n            default: null,\n            type: cc.Node,\n            visible: false//属性窗口不显示\n        },\n\n        the_last_touchChess: {\n            default: null,\n            type: cc.Node,\n            visible: false//属性窗口不显示\n        },\n\n        isDestory: cc.Boolean,\n\n        pzChess: {//\n            default: null,\n            type: cc.Node,\n            visible: false\n        },\n     \n \n    \n      \n    },\n\n    // use this for initialization\n    onLoad: function () {\n        // isDestory =false;\n        // var key1 = '动态key1';\n        // var key2 = '动态key2';\n        // var map = {};\n        // map[key1] = 1;\n        // map[key2] = 2;\n\n        // console.log(map[key1]);//结果是1.\n        // console.log(map[key2]);//结果是2.m\n\n        // //如果遍历map\n        // for(var prop in map){\n        //     if(map.hasOwnProperty(prop)){\n        //         console.log('key is ' + prop +' and value is' + map[prop]);\n        //     }\n        // }\n\n        // var mChessModel = cc.Class({\n        //   positionX: 0,\n        //     positionY: 0,\n        //     tag: 0,\n        //     name: '',\n        //     flag: 0\n        // });\n\n        /**\n         * 创建棋子\n         */\n        var i = 0;\n        var self = this;\n        var isMove = false;\n\n        // ListChess[i] = Chess;\n\n        //初始化棋盘上225个棋子节点，并为每个节点添加事件\n        for (var y = 0; y < 4; y++) {\n            for (var x = 0; x < 8; x++) {\n\n\n\n                var Chess = {\n                name: '',\n                tag: -1,\n                flag: -1,\n                positionX: 0,\n                positionY: 0\n       \n            };\n\n\n                var newNode = cc.instantiate(this.chessPrefab);//复制Chess预制资源\n                this.node.addChild(newNode);\n\n                if (parseInt(cc.random0To1() * 2) == 0) {\n\n                    if (Red.length > 0) {\n                         //红色\n\n                      \n                        Chess.flag =0;\n                        var number = parseInt(cc.random0To1() * Red.length); //随机一位数\n                        // cc.log('随机' + Red[number]);\n                        Chess.name = Red[number];\n                        Red.splice(number, 1);\n\n                    } else {\n                        //黑色\n                       Chess.flag =1;\n\n                        var number = parseInt(cc.random0To1() * Black.length); //随机一位数\n                        // cc.log('随机' + Black[number]);\n                        Chess.name  = Black[number];\n                        Black.splice(number, 1);\n                    }\n\n                } else {\n                    if (Black.length > 0) {\n                        //黑色\n                        Chess.flag =1;\n\n                        var number = parseInt(cc.random0To1() * Black.length); //随机一位数\n                        // cc.log('随机' + Black[number]);\n                        Chess.name  = Black[number];\n                        Black.splice(number, 1);\n                    } else {\n                        //红色\n                        Chess.flag =0;\n                        var number = parseInt(cc.random0To1() * Red.length); //随机一位数\n                        // cc.log('随机' + Red[number]);\n                        Chess.name  = Red[number];\n                        Red.splice(number, 1);\n                    }\n                }\n\n                Chess.positionX = (x + 5) * 105 - 890;\n                Chess.positionY = (y + 2) * 110 - 370;\n\n                newNode.setPosition(cc.p(Chess.positionX, Chess.positionY));//根据棋盘和棋子大小计算使每个棋子节点位于指定位置\n\n\n                newNode.zIndex = 1;//层级管理   \n                // newNode.group = \"default\"\n                Chess.tag = i;\n                newNode.tag = i;\n\n\n                ListChess[i] = Chess;\n                this.ListChessNode.push(newNode);\n                newNode.getComponent('PZ').game = this;\n\n\n\n\n\n                // var mChessModel = new ChessModel();\n                /**\n                 * 点击 TOUCH_START\n                 */\n                newNode.on(cc.Node.EventType.TOUCH_START, function (event) {\n                    this.zIndex = 100;//层级管理   \n                    self.touchChess = this;\n                    self.isDestory = false;\n\n                    ListChess[this.tag].positionX = this.x;\n                    ListChess[this.tag].positionY = this.y;\n\n                    // cc.log(mChessModel.positionX+'----'+mChessModel.positionY);\n                    cc.log('this.tag:'+this.tag)\n\n                    self.setChess(ListChess[this.tag].flag,this);\n\n\n                    //判断如果第一次点击与想要拖动的棋子为同一个 则允许拖动\n                    if (self.the_last_touchChess != null && self.touchChess.tag == self.the_last_touchChess.tag) {\n                        isMove = true;\n                    }\n\n                    //   this.label.string = '123321'\n                    //   newNode.addChild(label)\n                    // this.ListChessNode[i].getComponent(cc.Sprite).spriteFrame = this.blackSpriteFrame;\n                    // cc.log('TOUCH_START:' + isMove)\n                });\n\n                /**\n                * 点击 TOUCH_END\n                */\n                newNode.on(cc.Node.EventType.TOUCH_END, function (event) {\n\n                    this.zIndex = 1;//层级管理       \n\n                    self.the_last_touchChess = this;\n                    self.the_last_touchChess.tag = self.touchChess.tag;// 赋值tag\n                    isMove = false;\n                    // cc.log(self.positionX[this.tag] - this.position.x)\n                    // cc.log(self.positionY[this.tag] - this.position.y)\n                    cc.log(this.tag)\n\n\n                    self.isDestoryfunction(ListChess[this.tag].positionX, ListChess[this.tag].positionY);\n\n                    \n                });\n\n                /**\n                * 拖动 TOUCH_MOVE\n                */\n                newNode.on(cc.Node.EventType.TOUCH_MOVE, function (event) {\n                    //判断是否允许拖动\n                    if (isMove) {\n                        var delta = event.touch.getDelta();\n                        this.x += delta.x;\n                        this.y += delta.y;\n                    }\n\n                })\n\n                i++;\n            }\n\n        }\n\n\n\n    },\n    // called every frame\n    update: function (dt) {\n        // this.btn_test.node.on(cc.Node.EventType.TOUCH_START, this.btn_test_func, this)\n    },\n\n\n\n    setChess: function (flag,mNode) {\n        var test_label = mNode.getComponentInChildren(cc.Label);\n        // console.log(this.touchChess.tag)\n        if (flag == 0) {\n            test_label.node.color = new cc.Color(255, 0, 0);\n            test_label.string = this.getChessHZ(ListChess[mNode.tag].name, 0);\n        } else if (flag == 1) {\n            test_label.node.color = new cc.Color(0, 0, 0);\n            test_label.string = this.getChessHZ(ListChess[mNode.tag].name, 1);\n        }\n\n\n\n        //  this.ListChessNode[this.touchChess.tag].getComponent(cc.Sprite).spriteFrame = this.whiteSpriteFrame;\n\n\n    },\n\n    destoryChess: function (other, self) {\n        this.isDestory = true;\n        if (this.touchChess.tag == other.node.tag) { //有时候 不能分辨 是否是点中的棋子 判断棋子\n            this.pzChess = self.node;\n        } else {\n            this.pzChess = other.node;\n        }\n        // this.pzChess = other;\n    },\n\n    notdestoryChess: function (other, self) {\n        this.isDestory = false;\n    },\n\n    getChessHZ: function (position, flag) {\n        switch (position) {\n            // var Red = [5, 5, 5, 5, 5, 6, 6, 8, 8, 10, 10, 12, 12, 14, 14, 15];\n            case 5:\n                if (flag == 0) {\n                    return '兵';\n                } else {\n                    return '卒';\n                }\n            case 6:\n                return '炮';\n            case 8:\n                return '马';\n            case 10:\n                return '车';\n            case 12:\n                if (flag == 0) {\n                    return '相';\n                } else {\n                    return '象';\n                }\n            case 14:\n                if (flag == 0) {\n                    return '仕';\n                } else {\n                    return '士';\n                }\n            case 15:\n                if (flag == 0) {\n                    return '帅';\n                } else {\n                    return '将';\n                }\n\n            // case 5:\n            //     if (flag == 0) {\n            //         return '5';\n            //     } else {\n            //         return '5';\n            //     }\n            // case 6:\n            //     return '6';\n            // case 8:\n            //     return '8';\n            // case 10:\n            //     return '10';\n            // case 12:\n            //     if (flag == 0) {\n            //         return '12';\n            //     } else {\n            //         return '12';\n            //     }\n            // case 14:\n            //     if (flag == 0) {\n            //         return '14';\n            //     } else {\n            //         return '14';\n            //     }\n            // case 15:\n            //     if (flag == 0) {\n            //         return '15';\n            //     } else {\n            //         return '15';\n            //     }\n        }\n\n    },\n    \n    ChessPZ_function: function (X,Y,mFlag) {\n                       this.touchChess.x = X;\n                        \n                        this.touchChess.y = Y;\n                        \n                        this.ListChessNode[this.touchChess.tag].opacity = 0;//透明度\n\n                        ListChess[this.touchChess.tag].flag = 2;\n\n                        var old_name = ListChess[this.touchChess.tag].name;\n\n                        ListChess[this.touchChess.tag].name = 0;\n\n                        ListChess[this.pzChess.tag].flag =mFlag;\n\n                        ListChess[this.pzChess.tag].name = old_name;\n\n\n                        this.setChess(mFlag,this.ListChessNode[this.pzChess.tag]);\n        \n        \n    },\n\n    isDestoryfunction: function (X, Y) {\n        if (this.isDestory) {\n            // cc.log('销毁')\n            // this.touchChess.x = this.pzChess.x;\n            // this.touchChess.y = this.pzChess.y;\n\n            if (ListChess[this.touchChess.tag].flag == 0 && ListChess[this.pzChess.tag].flag == 1) {\n                //红吃黑\n                if (ListChess[this.touchChess.tag].name > ListChess[this.pzChess.tag].name) {\n\n                    //判断帅不能吃卒\n                    if (ListChess[this.touchChess.tag].name == 15 && ListChess[this.pzChess.tag].name == 5) {\n\n                        cc.log('帅不能吃卒')\n                        this.touchChess.x = X;\n                        this.touchChess.y = Y;\n\n                    } else {\n\n                        cc.log('红吃黑')\n                       \n\n                        // this.touchChess.x = X;\n                        \n                        // this.touchChess.y = Y;\n                        \n                        // this.ListChessNode[this.touchChess.tag].opacity = 0;//透明度\n\n                        // ListChess[this.touchChess.tag].flag = 2;\n\n                        // var old_name = ListChess[this.touchChess.tag].name;\n\n                        // ListChess[this.touchChess.tag].name = 0;\n\n                        // ListChess[this.pzChess.tag].flag =0;\n\n                        // ListChess[this.pzChess.tag].name = old_name;\n\n\n                        // this.setChess(0,this.ListChessNode[this.pzChess.tag]);\n\n\n                         this.ChessPZ_function(X,Y,0);\n\n                    }\n\n                    // this.ListChessNode[this.pzChess.tag].getComponent(cc.Sprite).spriteFrame = this.blackSpriteFrame;\n\n                } else if (ListChess[this.touchChess.tag].name == ListChess[this.pzChess.tag].name) {\n                    cc.log('不同色同样的棋子--销毁')\n\n                  this.ChessPZ_function(X,Y,0);\n\n                } else if (ListChess[this.touchChess.tag].name == 5 && ListChess[this.pzChess.tag].name == 15) {\n\n                    cc.log('兵可以吃将')\n\n                   this.ChessPZ_function(X,Y,0);\n                } else {\n                    cc.log('红吃黑--不销毁')\n                    this.touchChess.x = X;\n                    this.touchChess.y = Y;\n                }\n            } else if (ListChess[this.touchChess.tag].flag == 1 && ListChess[this.pzChess.tag].flag == 0) {\n                //黑吃红\n                if (ListChess[this.touchChess.tag].name > ListChess[this.pzChess.tag].name) {\n\n                    if (ListChess[this.touchChess.tag].name == 15 && ListChess[this.pzChess.tag].name == 5) {\n\n                        cc.log('将不能吃兵')\n                        this.touchChess.x = X;\n                        this.touchChess.y = Y;\n\n                    } else {\n\n                    this.ChessPZ_function(X,Y,1);\n\n                    }\n\n\n\n                } else if (ListChess[this.touchChess.tag].name == ListChess[this.pzChess.tag].name ) {\n\n                    cc.log('不同色同样的棋子--销毁')\n                this.ChessPZ_function(X,Y,1);\n                   \n                } else if (ListChess[this.touchChess.tag].name == 5 && ListChess[this.pzChess.tag].name  == 15) {\n\n\n                    cc.log('卒可以吃帅')\n                  this.ChessPZ_function(X,Y,1);\n                   \n\n\n                } else {\n                    cc.log('黑吃红--不销毁')\n                    this.touchChess.x = X;\n                    this.touchChess.y = Y;\n                }\n            } else {\n                if (ListChess[this.pzChess.tag].flag == 2) {\n\n                    if (ListChess[this.touchChess.tag].flag == 1) {\n                        cc.log('空棋子 黑')\n                        this.ChessPZ_function(X,Y,1);\n                         this.ListChessNode[this.pzChess.tag].opacity = 255;//透明度\n                    } else {\n                        cc.log('空棋子 红')\n                        this.ChessPZ_function(X,Y,0);\n                         this.ListChessNode[this.pzChess.tag].opacity = 255;//透明度\n                    }\n\n                } else {\n                    cc.log('同色不销毁')\n                    this.touchChess.x = X;\n                    this.touchChess.y = Y;\n                }\n            }\n\n        } else {\n            // cc.log('不销毁')\n            this.touchChess.x = X;\n            this.touchChess.y = Y;\n        }\n    }\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});"]}